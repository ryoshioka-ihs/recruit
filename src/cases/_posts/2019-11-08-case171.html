---
layout:       case
global_menu:  cases
title:        "NetAppストレージ筐体のOSバージョンアップ支援"
description:  "IIMヒューマン・ソリューションにてご支援させていただいたNetAppストレージのバージョンアップ作業に関する事例をご紹介します。
バージョンアップ作業の対象となるストレージは、仮想基盤で稼働する仮想マシンのシステム、およびデータ領域の格納先として利用されていたため、稼働している仮想マシンへの影響を最小限に抑えることが課題でした。本作業に関し、弊社の仮想技術とNetAppストレージの運用経験による実績を基に仮想マシンへの影響を抑えたバージョンアップ計画をご提案し、実作業担当となるベンダーの調整をご支援させていただいております。
"
keywords:     "仮想化基盤,NetAppストレージ"
date:         2019-11-07 00:00:00 +0900
PDF:          "case171"
categories:
 - "インフラ運用"

tags:
 - "仮想化基盤"
 - "NetAppストレージ"
  

---

<!-- コメント
tagsは1語ずつ区切る! -->


<section>
  <h1>{{ page.title }}</h1>
  <ul class="linkInPage">
    <li><a href="#toc-1">背景</a></li>
    <li><a href="#toc-2">概要</a></li>
    <li><a href="#toc-3">構成図</a></li>
    <li><a href="#toc-4">作業効果</a></li>
    <li><a href="#toc-5">弊社利用による効果</a></li>
    <li><a href="#toc-6">作業内容の詳細</a></li>
    <li><a href="#PdfDownload">PDFダウンロード</a></li>
  </ul>

  <section id="toc-1">
    <h2>背景</h2>
    <div class="smtSent">
      

<p>弊社の要員が常駐し、運用支援をさせていただいているお客様にて、すでに運用中のストレージ OS で見つかったバグを解消するため、OS のバージョンアップ作業のご支援をさせていただきました。</p><br>

<p>作業の対象となるストレージは 3 台(1 号機から 3 号機)あり、仮想基盤上で稼働する仮想マシンのシステム及びデータ領域の格納先として利用されており、1,000 台近くの仮想マシンデータが格納されていました。</p><br>

<p>バージョンアップ作業においては、稼働している仮想マシンの停止等による影響を最小限に抑えることが課題となっておりましたので、弊社ではこの状況に適した最良のバージョンアップ方法の提案と実作業を担当するストレージベンダーとの調整をご支援させていただきました。
</p>
    </div>
  </section>

  <section id="toc-2">
    <h2>概要</h2>
    <div class="smtSent">
      <table class="baseTb">
        <tbody>
          <tr>
            <th>業種</th>
            <td>航空・運輸業界</td>
          </tr>
          <tr>
            <th>目的</th>
            <td>NetAppOS のバージョンアップ</td>
          </tr>
          <tr>
            <th>目的</th>
            <td>
             <ul class="grayDisc">
							<li>利用ユーザー数： 約 20,000 名</li>
							<li>NetApp 構成<br>
								NetApp FAS 3220：2 台（1、2 号機）<br>
								NetApp FAS 8200：1 台（3 号機）</li>
							<li>vSphere 6.0 構成<br>
								vCenter Server 1 台<br>
								ESXi：約 100 台<br>
								仮想マシン：約 1,000 台</li>
						  </ul>
            </td>
          </tr>
          <tr>
            <th>作業ボリューム</th>
            <td>
             作業期間 6 か月間（工数約 4 人月）
            </td>
          </tr>
          
          <tr>
            <th>作業内容</th>
            <td>
              <ul class="grayDisc">
                <li>ベンダー調整支援</li>
                <li>仮想マシン調整支援</li>
                <li>NetApp バージョンアップ作業支援</li>
                <li>NetApp 動作試験（単体、結合）</li>
                <li>既存ドキュメントの修正<br>
                	詳細設計書<br>
                	環境定義書<br>
                	運用手順書</li>
                </ul>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>


<section id="toc-3">
    <h2>構成図</h2>
    <div class="smtSent">
      <div class="lightBox">
         <figure>
<img src="/image/cases/case171_01.png">
</figure>
      </div>
    </div>
  </section>



  <section id="toc-4">
    <h2>作業効果</h2>
    <div class="smtSent">

      <h3>データセンター作業における事前準備と現場でのベンダーコントロールを実施</h3>
      <h4>＜課題の詳細＞</h4>
		<p>今回は、データセンターでの作業となることから時間が限られており、効率よく作業を進める必要がありました。そのため、予め作業手順書等をベンダーに用意いただいたうえで作業を行いました。</p>

		<p>しかしながら、ベンダーから事前に提出された作業手順書は、時系列に沿った手順の記載やチェックリスト等になっておらず、 チェックポイントや切り戻しの判断基準などの記載が不足しているものがほとんどであり、効率よく作業を進められるような手順書にはなっておりませんでした。</p>

		<br>

		<h4>＜どのように改善したか＞</h4>
		<p>作業手順書等の修正すべき点の洗い出しと作業スケジュールを作成し、関係者内で共有させていただきました。</p>
		<p>これにより、当初の想定よりも短い作業期間で完了することができております。</p>

		<p>また、今回のバージョンアップ作業の対象となる、1 号機から 3 号機を段階的に 1 台ずつ、別の日に行う計画となっていましたが、 1 号機、2 号機と、作業実施の都度、作業内容の改善を行い、より精度の高い作業を行えたことでトータルとして作業時間の短縮を実現でき、お客様に評価いただけました。</p>

		<br>

		<h4>＜どんな効果があったか＞</h4>
		<p>作業実施の都度、作業内容の改善を行ったことにより、データセンターでのバージョンアップ作業時間は以下の通り短縮することができました。</p>

		<h4>＜作業所要時間＞</h4>
		<ul>
			<li>1 号機の作業時間：約 8 時間（製品バグによる想定外の作業が発生しました。）</li>
			<li>2 号機の作業時間：約 5 時間</li>
			<li>3 号機の作業時間：約 4 時間（初回から約半分の短縮を実現しました。）</li>
		</ul>

    </div>
  </section>

  <section id="toc-5">
    <h2>弊社利用による効果</h2>
    <div class="smtSent">
      <h3>仮想基盤上で稼働する仮想マシンへの影響を最小限に抑える段階的なバージョンアップ方法の提案</h3>

	<h4>＜内容＞</h4>
    <p>ストレージのバージョンアップは、機器の停止が伴うため、予め仮想マシンを別のストレージに Storage vMotion を 使用して退避させる手法を計画しました。　Storage vMotion は基本的に停止を行わずに ESXi ホスト間を移行できる技術ですが、仮想マシン構成の都合上、一部の仮想マシンは停止した状態で移動させる必要がありました。</p>
    <p>例えば、 OS レベルでクラスタ構成を組んでおり、アクティブ/スタンバイの切り替えが伴うものなどが該当し、その場合には仮想マシンを管理するアプリ担当と夜間作業の調整をする必要もありました。</p>

	<p>このような停止しなければならない仮想マシンを事前に抽出し、できる限り同じタイミングで移動することが出来るように調整を行いました。</p>
	<p>また、バージョンアップ対象のストレージは 3 台あるため、段階的にバージョンアップ作業を行う必要がありました。（以下の図を参照）</p>
	<p>上記のように、弊社の仮想技術と NetApp ストレージの運用経験による実績を基に仮想マシンへの影響を抑えたバージョンアップ計画を提案したことをお客様からご評価いただくことができ、予定通り 3 か月内で全てのバージョンアップを完了させることができました。</p>
<!-- <div class="smtSent"> -->
      <div class="lightBox">
         <figure>
<img src="/image/cases/case171_02.png">
</figure>
      </div>
    <!-- </div> -->
     
    </div>
  </section>

 

 <section id="toc-6">
    <h2>作業内容の詳細</h2>
    <div class="smtSent">
      <h3>ドキュメント修正</h3>
       <ul class="numList">
      	<li><p>既存ドキュメントの修正</p>
      		<ul class="grayDisc">
      			<li>詳細設計書</li>
      			<li>運用設計書</li>
      			<li>運用手順書</li>
      		</ul>
      	</li>
      </ul>

      <h3>バージョンアップ作業</h3>
       <ul class="numList">
      	<li><p>ベンダー調整支援</p>
      		<ul class="grayDisc">
      			<li>ベンダー作業手順書のレビュー</li>
      			<li>作業スケジュールの作成</li>
      			<li>バージョンアップ計画スケジュールの提案</li>
      		</ul>
      	</li>
      
      	<li><p>仮想マシン調整支援</p>
            <ul class="grayDisc">
        		<li>バージョンアップ計画スケジュールの作成と説明</li>
      		</ul>
      	</li>

      	<li><p>NetAppストレージのバージョンアップ支援</p>
            <ul class="grayDisc">
        		<li>バージョンアップ前の仮想マシン退避</li>
        		<li>NetApp ストレージのバージョンアップ</li>
      		</ul>
      	</li>

      	<li><p>NetApp動作試験</p>
            <ul class="grayDisc">
        		<li>単体試験</li>
        		<li>結合試験</li>
      		</ul>
      	</li>
      </ul>

      <h3>納品ドキュメント</h3>
      <ul class="grayDisc">
        <li>詳細設計書</li>
        <li>運用設計書</li>
        <li>運用手順書</li>
        <li>動作確認項目表兼結果報告書</li>         
      </ul>
     
    </div>
  </section>

</section>

